API versions

En Kubernetes, les API versions permettent de gÃ©rer lâ€™Ã©volution des objets et
fonctionnalitÃ©s. Chaque ressource (Pods, Deployments, Services, etc.)
est dÃ©finie via une API group/version, indiquÃ©e dans son manifeste YAML :

apiVersion: apps/v1
kind: Deployment

ğŸ“š Structure d'une API version
Elle suit gÃ©nÃ©ralement ce schÃ©ma :
<group>/<version>
Par exemple :
apps/v1 (pour Deployment, DaemonSet, etc.)
batch/v1 (pour Job, CronJob)
v1 (core group, pour Pod, Service, Namespaceâ€¦)
Si aucun group nâ€™est spÃ©cifiÃ©, câ€™est lâ€™API core (v1).

ğŸ”„ Phases de version : Alpha / Beta / GA
Chaque version peut Ãªtre dans une phase de stabilitÃ© :

Phase	  PrÃ©fixe	  StabilitÃ©	          Pour prod ?	   Suppression possible ?
Alpha	  v1alpha1	Instable	          âŒ Non	        âœ… Oui (Ã  tout moment)
Beta	  v1beta1	  Moyennement stable	âš ï¸ Parfois	    âœ… Oui (mais prÃ©avis)
GA	    v1	      Stable	            âœ… Oui	        âŒ Non (sauf dÃ©prÃ©ciation lente)

ğŸ“¦ Exemples courants dâ€™API versions
Ressource	                       apiVersion	                Remarques
Pod	                             v1	                        API core
Deployment	                     apps/v1	                  Depuis Kubernetes 1.9
DaemonSet	                       apps/v1
CronJob	                         batch/v1	                  GA depuis 1.21
Ingress	                         networking.k8s.io/v1	      GA depuis 1.19
Service	                         v1	                        API core
HorizontalPodAutoscaler	         autoscaling/v2	            Pour les metrics avancÃ©es
CustomResourceDefinition (CRD)	 apiextensions.k8s.io/v1	  GA depuis 1.16

ğŸ” Comment voir les API disponibles ?
1. Lister tous les API groups et versions :
kubectl api-versions
2. Lister toutes les ressources disponibles (et leurs API versions) :
kubectl api-resources
3. VÃ©rifier lâ€™API version dâ€™un objet :
kubectl get deployment my-app -o yaml
âš ï¸ Attention Ã  la dÃ©prÃ©ciation

Certaines versions sont supprimÃ©es Ã  mesure que Kubernetes Ã©volue. Par exemple :
extensions/v1beta1 a Ã©tÃ© supprimÃ© depuis Kubernetes 1.22
networking.k8s.io/v1beta1 aussi pour Ingress
